
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!-->
<html class="no-js" lang="zh-CN"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>2015年我都干嘛了 - Handy's</title>
  <meta name="author" content="Your Name">
  <!--[if lt IE 9]>
    <script src="http://x.papaapp.com/farm1/a571d2/8dda131d/html5shiv.js"></script>
    <![endif]-->
  
  <meta name="description" content="2015年我都干嘛了 Dec 6th, 2015 2015年即将结束，那这一年我到底都干嘛了？ 从去年(2014)的12月份就开始暗无天日的加班忙碌，直到今天下半年才好了很多，眼看这就要要2016了，
也该回顾一下2015年的工作了。 AutoLayout 2015年12月，加入了一个新团队－ &hellip;">
  

  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://Handy-Wang.github.io/blog/2015/12/06/2015nian-wo-du-gan-ma-liao/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script type="text/javascript" src="http://t.papaapp.com/js/libs/jquery/1.7.2/jquery.js"></script>
  <link href="/atom.xml" rel="alternate" title="Handy's" type="application/atom+xml">

  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->

  

</head>
<body   >
  <header id="header" class="clearfix">    <div class="container">
        <div class="col-group">
            <div class="site-name ">
                <a id="logo" href="/">
                   Handy's
                </a>
                <p class="description">Stay hungry, stay foolish.</p>
            </div>
            <div>
                <nav id="nav-menu" class="clearfix">
                    <a class="index-nav current" href="/">Blog</a>
<a class="archives-nav" href="/blog/archives">Archives</a>
                </nav>
            </div>
        </div>
    </div>
</header>
  <div id="body">
    <div class="container">
    	<div class="col-group">
			<div class="col-8" id="main">
  <div class="res-cons">
  <article class="post clearfix">
  
  <header>
    
      <h1 class="post-title">2015年我都干嘛了</h1>
    
    
      <p class="post-meta">
        








  


<time datetime="2015-12-06T11:33:18+08:00" pubdate data-updated="true">Dec 6<span>th</span>, 2015</time>
        
      </p>
    
  </header>


<div class="post-content"><p>2015年即将结束，那这一年我到底都干嘛了？</p>

<pre><code>从去年(2014)的12月份就开始暗无天日的加班忙碌，直到今天下半年才好了很多，眼看这就要要2016了，
也该回顾一下2015年的工作了。
</code></pre>

<h4>AutoLayout</h4>

<p>2015年12月，加入了一个新团队－嗨购，仍然是负责iOS项目开发，人员上加上我两人，版本处于0.0.1版本。</p>

<p>当时接收项目后，发现这个项目的界面采用storyboard+autolayout开发，另外那个哥们去AutoLayout的使用也处于学习阶段，所以遇到的主要问题就是修改界面的Bug。由于我之前没有使用过storyboard和autolayout，再加上UI设计师对界面的细节控制要求很高，所以有些应付不了了。在另一个哥们儿的辅助下，将就着开发了0.1.0版本(仍采用storyboard+autolayout)，其实这个过程非常苦恼，“是好好学习一下AutoLayout，然后在项目里继续使用AutoLayout呢？” 还是 “采用自己熟悉的纯代码方式来编写？”</p>

<!--more-->


<p>最后，综合考虑项目的进度压力、质量的可控性、学习的时间成本后，决定还是暂时放弃Storyboard+AutoLayout，转而使用保守的纯代码方式开发。</p>

<p>在0.1.0版本后，恰逢元旦，另外那个哥们儿休假半个月左右，回家结婚去了。我就逮着这个时机，在项目0.2.0时把项目界面实现方式、网络层、数据库等进行了大重构。</p>

<p>现在相对不忙碌了，计划补补 Todo: <a href="https://developer.apple.com/library/mac/documentation/UserExperience/Conceptual/AutolayoutPG/index.html">AutoLayout</a>以及 Todo: <a href="https://github.com/SnapKit/Masonry">Masonry</a>.</p>

<h4>CocoaPods</h4>

<p>其实，上面提到AutoLayout被我弃用后，就感觉比较反人类了，然后我仍然还要反人类一次。</p>

<p>嗨购项目在0.2.0及之前，对第三方库的依赖方式是通过CocoaPods来管理的，但是为什么这之后我把CocoaPods去掉了呢？这就不得不提到Jenkins(我会在后面聊聊Jenkins)和CocoaPods的代码管理。</p>

<p>本来采用Jenkins对iOS项目打包发布是一件很NB的事情，但是对通过CocoaPods管理第三库的iOS项目打包是一件非常痛苦的事情。说起痛苦，主要是集中在Jenkins上的配置以及项目本身的一些配置，如：Jenkins里build目录的指定、项目中schema的share等问题。这一系列问题我都有记录，这里就不细说了。虽然痛若，但是经过两三天的努力，可以通过Jenkins打包CocoaPods管理的项目。</p>

<p>感觉这一点还好，但是，没有想到最后让我放弃CocoaPods的原因尽是它的优点：无感知管理项目的第三方库依赖。
因为，</p>

<ol>
<li>第三方库难免有Bug，所以我也经常修改这些源码里Bug，修改地方多了后也就忘了修改过哪些地方了。然后有一天我pod update了一下，如果本地的源码修改没有了，我得从项目的SVN上对比着再被回来，当时非常恼怒。。。</li>
<li>由于天国的各种墙，安装cocoapods时我修改了gem源为<a href="https://rubygems.org/%E3%80%82%E4%BD%86%E6%98%AF%EF%BC%8C%E6%B2%A1%E6%9C%89%E6%83%B3%E5%88%B0%E5%9C%A8%E6%9F%90%E5%87%A0%E5%A4%A9pod">https://rubygems.org/%E3%80%82%E4%BD%86%E6%98%AF%EF%BC%8C%E6%B2%A1%E6%9C%89%E6%83%B3%E5%88%B0%E5%9C%A8%E6%9F%90%E5%87%A0%E5%A4%A9pod</a> update和pod install根本用不了，导致严重影响了我预期的开发进度。</li>
</ol>


<p>所以，我又选择了保守的方案，删除cocoapods，转而采用源代码依赖的方式，这样一来Jenkins打包也简化了。</p>

<pre><code>现在回想，关于那段配置Jenkins打包CocoaPods项目的经历非常可贵，那是对意志的磨砺。
</code></pre>

<ul>
<li><strong>相关知识</strong></li>
<li><a href="https://www.evernote.com/l/AFkw93ypG4JB9Ka-cwCPgU-xtTWZx9RTEa4">Jenkins打包CocoaPods项目</a></li>
<li><a href="http://blog.devtang.com/blog/2014/05/25/use-cocoapod-to-manage-ios-lib-dependency/">更换CocoaPods的镜像</a></li>
</ul>


<h4>Jenkins</h4>

<p>刚到嗨购的时候，发布安装包的方式是archive ipa文件并上传到fir.im进行发布，以供其它人员进行安装试用或测试。随着项目的推进，期望把这种Inhouse Release的方式自动化，所以引入之前在搜狐时就一直采用的Jenkins进行自动打包发布。</p>

<p>关于Jenkins的安装我简要提一下，主要还是回顾一下使用过程中遇到的问题</p>

<p><strong>Jenkins环境</strong></p>

<ul>
<li>下载Jenkins.war，然后启动java -jar jenkins.war</li>
<li>Jenkins的相关目录

<ul>
<li>/Applications/Jenkins &ndash; which is having the jenkins.war alone.</li>
<li>/Users/Shared/Jenkins &ndash; with all the plugins, war, jobs, usercontent, etc.</li>
<li>/Users/Shared/Jenkins/Home &ndash; JENKINS_HOME</li>
<li>/Library/LaunchDaemons/org.jenkins-ci.plist &ndash; Jenkins自启动文件</li>
<li>/Library/Application Support/Jenkins/jenkins-runner.sh &ndash; 自启动shell脚本</li>
</ul>
</li>
</ul>


<p><strong>Jenkins+CocoaPods项目</strong></p>

<ul>
<li>参见<a href="https://www.evernote.com/l/AFkw93ypG4JB9Ka-cwCPgU-xtTWZx9RTEa4">我的Evenote Sharing</a></li>
</ul>


<p><strong>七牛空间</strong></p>

<ul>
<li>参见<a href="https://www.evernote.com/l/AFkw93ypG4JB9Ka-cwCPgU-xtTWZx9RTEa4">我的Evenote Sharing</a></li>
</ul>


<p><strong>打包状态邮件通知</strong></p>

<ul>
<li>在Jenkins里安装Mail Notification Plugin</li>
<li>以126邮件为例，配置SMPT服务器及端口</li>
<li>注意：Jenkins管理员邮箱要与发送邮件的账号一致，不然会发送邮件失败。</li>
<li>在具体项目中，可以配置相应的收件人、trigger等。</li>
</ul>


<h4>Redmine</h4>

<p>在2008年刚参加工作的时候，老东家就有搭建Redmine用于项目管理、issue跟踪、Wiki书写。在搜狐的时候，是由服务器同学搭建的trac来写wiki。由于刚到嗨购团队的时候，接口文件都是服务器同学通过word文档来记录并分发给相关开发人员。我觉得这样非常的不方便，不但不方便更改，也不便于分发。所以，我偷摸地在公司内网搭建了Redmine，给相关技术人员分发了账号和权限，从而以后<strong>“妈妈再也不用担心我们的接口文档了”</strong>。</p>

<pre><code>Todo: 也有朋友在git上写项目的wiki，改天一定要试下
</code></pre>

<p>到目前为止，我采用过三种搭建Redmine的方法：</p>

<ol>
<li>纯手工24K金方式打造Apache+MySQL+ROR

<ul>
<li>完全手工地安装Apache、MySQL、RubyOnRails环境</li>
<li>此法太虐心，会遇到各种东西没有安装，非常煎熬</li>
</ul>
</li>
<li>采用BitNami一键式安装Redmine

<ul>
<li>采用BitNami安装的Redmine，在一个单独的目录下安装了Apache、MySQL等环境。</li>
<li>BitNami安装Redmine后，操作系统里安装的Apache、MySQL的环境变量被修改了</li>
<li>为了安装一个Redmine，把操作系统里本身配置的一些环境变量给搞乱，不好不好。</li>
</ul>
</li>
<li>通过Redmine项目源码布署

<ul>
<li>Redmine本身是一个ROR项目，再加上09年左右的时候做过一个ROR项目，所以此法可试。</li>
<li>下载Redmine源码: <a href="http://www.redmine.org/projects/redmine/wiki/Download">http://www.redmine.org/projects/redmine/wiki/Download</a></li>
<li>解压Redmine到某个目录</li>
<li>配置数据库连接，并创建或导入Redmine数据库表</li>
<li>在Redmine项目运行sudo ruby bin/rails server webrick -e production来启动项目，从而抛弃Apache</li>
<li><strong>此法最好，对于我来说最简单直接，也符合程序思维(建立数据库、配置数据连接、部署项目源码并运行)</strong></li>
</ul>
</li>
</ol>


<h4>Push Notification Simulator</h4>

<p>Todo:</p>

<h4>Crashlytics</h4>

<p>Todo:</p>

<h4>嗨购项目架构演进概要</h4>

<p>Todo:</p>
</div>


  <footer class="post-footer">
    <div class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Your Name</span></span>
 and 
      File under 


    </div>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://Handy-Wang.github.io/blog/2015/12/06/2015nian-wo-du-gan-ma-liao/" data-via="" data-counturl="http://Handy-Wang.github.io/blog/2015/12/06/2015nian-wo-du-gan-ma-liao/" >Tweet</a>
  
  
  
</div>

    
    <div class="meta">
      
        <a class="basic-alignment left" href="/blog/2014/03/27/ru-he-zhong-zhi-tui-song-she-zhi-ti-xing/" title="Previous Post: 如何重置推送设置提醒(转)">&laquo; 如何重置推送设置提醒(转)</a>
      
      
    </div>
  </footer>
</article>

  </div>
</div>

  <aside id="secondary">
  
    <section class="widget">
    <form id="search" action="https://www.google.com/search" method="get">
    	<input type="hidden" name="q" value="site:Handy-Wang.github.io"/>
    	<input type="text" name="q" results="0" class="text" placeholder="Google搜索"/>
    </form>
</section>

<section class="widget">
	<h3 class="widget-title">最新文章</h3>
	<ul class="widget-list">
		
     	<li>
      	  <a href="/blog/2015/12/06/2015nian-wo-du-gan-ma-liao/">2015年我都干嘛了</a>
      	</li>
    	
     	<li>
      	  <a href="/blog/2014/03/27/ru-he-zhong-zhi-tui-song-she-zhi-ti-xing/">如何重置推送设置提醒(转)</a>
      	</li>
    	
     	<li>
      	  <a href="/blog/2014/03/19/pou-xi-performselectordai-you-afterdealy-can-shu-de-fang-fa-shi-xian/">剖析带有afterDealy参数的performSelector方法实现</a>
      	</li>
    	
     	<li>
      	  <a href="/blog/2014/03/18/qian-tan-nei-cun-bu-ju-memory-layout/">浅谈内存布局(Memory Layout)即虚拟地址空间</a>
      	</li>
    	
     	<li>
      	  <a href="/blog/2014/03/14/uinavigationcontrollerfen-xi/">UINavigationController分析</a>
      	</li>
    	
	</ul>
</section>




  
</aside>


      	</div>
    </div>
  </div>
  <footer id="footer">
  	<div class="container">
	Copyright &copy; 2015 - Your Name -
  <span class="credit">Powered by <a rel="nofollow" href="http://octopress.org">Octopress</a> on <a rel="nofollow" href="http://pages.github.com/">GitHubPages</a>
  </span>
  - <span class="credit">Theme by <a rel="nofollow" href="http://pagecho.com">Cho</a></span>


</div>

  </footer>
  







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
